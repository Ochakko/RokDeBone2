<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 11.0.0.0 for Windows">
<META http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE></TITLE>
</HEAD>
<BODY>
<P><FONT size="+2">Global Position Animation(グローバルポジションアニメーション)について</FONT><BR>
<BR>
グローバルポジションアニメーション（以下GPAと略す）とは<BR>
キャラクター全体の位置、向きのアニメーションのことです。<BR>
<BR>
キャラクター全体の姿勢は一番親のボーンを操作しても設定できますが<BR>
これをやるとモーションファイル（qua）に全体姿勢を格納することになるため<BR>
モーションの使い回しがしにくくなります。<BR>
そこでキャラクター全体の姿勢のアニメーションを独立して編集再生出来るようにしたのがGPA機能です。<BR>
<BR>
<BR>
GPAの操作はモーションウインドウのGPAタブで行います。<BR>
図１がGPAタブを選択したときの画面です。<BR>
<IMG src="jpegfiles/rdb2_gpdlg.png" width="682" height="607" border="0"><BR>
図１：GPAタブ<BR>
<BR>
キャラクターの位置と向きを設定できる他、円移動や地面への接地もサポートしています。<BR>
<BR>
数値での姿勢の設定はダイアログに数値を入力した後、「適用」または「キー作」ボタンを押します。<BR>
すると下の細長いタイムラインに丸いキーが表示されます。<BR>
注意すべきは向きの成分の並びがXYZではなくてZXYになっていることです。<BR>
これはZ,X,Yの順番で回転するためにこうなっています。<BR>
<BR>
<BR>
フレーム全体の長さや繰り返しモードなどの設定は「設定」ボタンを押して行います。<BR>
図２が設定ダイアログです。<BR>
<IMG src="jpegfiles/rdb2_gpsetting.png" width="343" height="480" border="0"><BR>
図２：設定ダイアログ<BR>
<BR>
<BR>
プレピューするときはモーションとカメラとGPAが同時に再生されますが<BR>
それぞれのフレーム番号は設定ダイアログで設定した表示開始フレーム番号と表示終了フレーム番号によって決まり<BR>
独立して変化します。<BR>
<BR>
<BR>
GPAの姿勢はマウス操作でも出来ます。<BR>
メインウインドウのツールバーの「R」ボタンを押しているときは回転角度を設定でき<BR>
「T」「T2」ボタンを押しているときは位置を設定できます。<BR>
マニピュレータの３色のリングをドラッグして設定を行います。<BR>
中央の四角い黄色はドラッグできません。<BR>
<BR>
「R」「T」「T2」以外のボタンを押しているときはGPAの編集は出来ません。<BR>
「GPA」タブを選択しているときにこれら以外のボタンを押すと<BR>
強制的に「基本操作」タブに移動するようになっています。<BR>
<BR>
<BR>
ファイルの読み書きはFileメニューで行います。<BR>
ファイルの拡張子は*.gpaでテキスト形式です。<BR>
<BR>
複数のgpaファイルを同時に読み込むことが出来ます。<BR>
これらを切り替えるにはGPAメニューを選択します。<BR>
図３がGPAメニューです。<BR>
<IMG src="jpegfiles/rdb2_gpmenu.png" width="721" height="213" border="0"><BR>
図３：GPAメニュー<BR>
<BR>
<BR>
「アニメの選択」メニューでアニメの名前を選ぶとそのアニメを編集再生保存出来るようになります。<BR>
ここに表示されるアニメ名は設定ダイアログで設定したものです。<BR>
<BR>
<BR>
GPAの姿勢の値の変化はグラフウインドウに表示されます。<BR>
表示できる要素は位置と向きの２つです。<BR>
これらはグラフコンボボックスでどちらかを選択します。<BR>
図４はグラフコンボボックスです。<BR>
<IMG src="jpegfiles/rdb2_gpcombo.png" width="144" height="87" border="0"><BR>
図４：グラフコンボボックス<BR>
<BR>
<BR>
グラフウインドウではキー間の補間計算方法を設定できます。<BR>
キーの丸いポイントを右クリックすると図５のようなメニューが出ます。<BR>
<BR>
<IMG src="jpegfiles/rdb2_gpfu.png" width="348" height="420" border="0"><BR>
図５：GPA補間設定<BR>
<BR>
このメニューで線形補間かスプライン補間かを選べます。<BR>
<BR>
キーの値自体もグラフウインドウで編集できます。<BR>
キーの丸いポイントをマウスで上下に左ドラッグ可能です。<BR>
このときXボタンを押しているときはX座標の値が<BR>
Y、Zボタンを押しているときはそれぞれY座標、Z座標の値が変化します。<BR>
<BR>
<BR>
接地も出来ます。<BR>
接地はFileメニューで「地面データ（大オブジェ）の読み込み」を実行して<BR>
地面を読み込んでいるときだけ機能します。<BR>
キャラクターの原点の座標からGPAタブで設定したRAYYの高さからRAYLENGの長さのレイを<BR>
下に飛ばして地面との判定を行います。<BR>
<BR>
<BR>
GPAアニメは編集はキーで行いますが<BR>
再生は１フレームずつ全てを計算し終わった全フレームデータで行います。<BR>
キーから全フレームへの変換は「全計算」ボタンで行います。<BR>
姿勢操作の際には自動的に全計算するようにしていますが<BR>
接地などの設定が画面に反映されない場合は手動で「全計算」ボタンを押してください。<BR>
<BR>
<BR>
<A href="rokdebone.htm">RokDeBone2のトップページに戻る</A><BR>
<BR>
<A href="index.htm">トップページに戻る</A><BR>
</P>
</BODY>
</HTML>