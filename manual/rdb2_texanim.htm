<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 11.0.0.0 for Windows">
<META http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE></TITLE>
</HEAD>
<BODY>
<P><B><FONT size="+2">キーフレームによるテクスチャアニメ</FONT></B><BR>
<BR>
RokDeBone2では、<BR>
キーフレームを作り任意のタイミングでテクスチャを変化させる方式をサポートしています。<BR>
<BR>
<BR>
キーフレーム方式ではテクスチャのキー情報はボーンごとに格納されます。<BR>
こうすることでマルチレイヤーモーションでボーンごとに異なるモーションを再生する場合にも<BR>
テクスチャアニメが使用できるようになります。<BR>
<BR>
テクスチャアニメは面マテリアルのテクスチャを変化させることで行います。<BR>
情報がボーンごとに格納されるので、まず設定する前に<BR>
どのボーンにどの面マテリアルの変化を設定するかを決めます。<BR>
<BR>
例えば手の動きに合わせて顔のテクスチャを変えたいときは<BR>
手のボーンの場所に顔マテリアルの設定をします。<BR>
<BR>
<BR>
<BR>
<BR>
設定手順を説明します。<BR>
最初に、変化させたいテクスチャをあらかじめ全て登録しておく必要があります。<BR>
まずメインウインドウの「面マテリアル」を選択し面マテリアル設定ダイアログを出します。<BR>
ダイアログでテクスチャを追加したいマテリアル名をクリックし、「テクスチャーの設定画面へ」ボタンを押します。<BR>
すると図１のようなテクスチャ設定ダイアログが出ます。<BR>
<BR>
<BR>
<IMG src="jpegfiles/rdb2_texanim0.jpg" width="914" height="697" border="0"><BR>
図１　テクスチャ設定ダイアログ<BR>
<BR>
<BR>
このダイアログで「テクスチャモード」を「パラパラアニメモード」にします。<BR>
そして「追加（参照）」ボタンで変化させたい顔のテクスチャをすべて追加します。<BR>
「ファイル名のみで指定する」にしておいた方がいいでしょう。<BR>
ここまで出来たらOKボタンを押してダイアログを閉じてください。<BR>
<BR>
<BR>
<BR>
次はキーの作り方です。<BR>
階層構造エディタでキーを格納するボーン名をクリックしてから、モーションダイアログの「テクスチャ」タブをクリックすると<BR>
図２のようになります。<BR>
<BR>
<IMG src="jpegfiles/rdb2_texanim1.jpg" width="1005" height="804" border="0"><BR>
図２　テクスチャタブ<BR>
<BR>
<BR>
フレーム長は姿勢制御用と同じですので、「基本操作」タブの「設定」ボタンを押して設定してください。<BR>
「テクスチャ」タブでキーの作成をします。<BR>
スライダーでキーを作りたいフレーム番号を選び、表中のマテリアル名をクリックします。<BR>
すると図３のようなメニューが出ます。<BR>
<BR>
<IMG src="jpegfiles/rdb2_texanim2.jpg" width="1005" height="280" border="0"><BR>
図３　テクスチャ設定<BR>
<BR>
<FONT size="+1"><B>クリックしてもメニューが出ない場合は、もう一度マテリアル名をクリックしてください。</B></FONT><BR>
メニューには「設定なし」の下に図１で設定したテクスチャ名がすべて表示されます。<BR>
現在のフレーム番号の時に表示したいテクスチャ名をマウスで選択してください。<BR>
すると、ダイアログの表の「テクスチャ名」のところに選択したテクスチャ名が表示されます。<BR>
白いバー部分にはキーが存在することを示す点が表示されます。<BR>
このときメインウインドウ（３D表示）への表示も反映されるので確認してください。<BR>
<BR>
このようにしてフレーム番号を変えてからテクスチャ名を設定するのを繰り返して<BR>
アニメーションを作ってください。<BR>
<BR>
右側のボタンを使用すればコピーやペーストも出来ます。<BR>
「全削除」ボタンを押すと他のボーンに格納しているテクスチャアニメキーもすべて削除されます。<BR>
完成したら「プレビュー」と「ストップ」で動作確認が出来ます。<BR>
<BR>
<BR>
<FONT size="+1"><B><BR>
追記（2008/07/21）</B></FONT><BR>
テクスチャアニメのキーの位置は「基本動作」タブで作った姿勢制御のキーの位置とは独立して作成可能です。<BR>
テクスチャアニメのためだけのキーを作成して設定することになります。<BR>
<BR>
テクスチャアニメキーはボーンごとにも独立しており、<BR>
それぞれのボーンで好きな位置にキーを作れます。<BR>
<BR>
テクスチャアニメのキー情報はボーンの中に格納されることを書きました。<BR>
ですので面マテリアルとボーンとを関連付ける必要があります。<BR>
この際、ある１つの面マテリアルのテクスチャアニメ情報を、複数のボーンの場所に作るとトラブルのもとになるので注意してください。<BR>
複数のボーンに同じマテリアルのテクスチャアニメを設定した場合の動作は不定となります。<BR>
設定を始める前に、「このマテリアルはこのボーンに」ということを１対１で決めておくとよいでしょう。<BR>
<BR>
<BR>
<FONT size="+1"><B>追記（2008/07/23）</B></FONT><BR>
図３のテクスチャアニメのキー情報はモーションファイル（qua）に保存されますが<BR>
図１の面マテリアル情報は形状ファイル(sig)に保存されます。<BR>
面マテリアルにテクスチャを追加した場合にはsigも保存してください。<BR>
<BR>
<BR>
<BR>
<A href="rokdebone.htm">RokDeBone2のトップページに戻る<BR>
</A><BR>
</P>
</BODY>
</HTML>