<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 11.0.0.0 for Windows">
<META http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE></TITLE>
</HEAD>
<BODY>
<P><FONT size="+2"><B>指定した軸に関してのみIKで回転する方法</B></FONT><BR>
<BR>
IK階層数を１より大きく設定したときやIKターゲットを設定しているとき、ボーンが意図しない方向に曲がってしまって<BR>
いらいらした経験をお持ちの方は多いはず。<BR>
RokDeBone2 ver5.0.4.2で実装された指定軸限定IKは、このいらいらを解決します。<BR>
<BR>
まず普通のIKとどういう風に違うのかを見てみましょう。<BR>
図１はIKターゲットで足元を固定し軸指定なしでT2したときの図です。<BR>
（IKターゲットの設定の仕方については<A href="rdb2_ikt.htm">こちら</A>をご覧ください。）<BR>
<BR>
<IMG src="jpegfiles/rdb2_za4_1.png" width="666" height="412" border="0"><BR>
図１：指定軸なしで「T2」<BR>
<BR>
<BR>
足が曲がってはいけない方向に曲がっています。<BR>
<BR>
図２は足のIKの軸が「座１」のX軸になるように設定し、同じ操作をしたときの図です。<BR>
<BR>
<IMG src="jpegfiles/rdb2_za4_2.png" width="670" height="414" border="0"><BR>
図２：軸を指定して「T2」<BR>
<BR>
図２は足に無理な回転がかからずにまっすぐ曲がっています。<BR>
<BR>
指定軸を設定した場合はIKターゲットと「T2」モードの組み合わせの時と、「R」モードのときに限定軸が反映されます。<BR>
<BR>
では設定方法を見てみましょう。<BR>
<BR>
<IMG src="jpegfiles/rdb2_za4_3.png" width="705" height="631" border="0"><BR>
図３：「４」モード<BR>
<BR>
軸を設定するにはツールバーの「４」ボタンを押します。<BR>
設定したいボーンをマウスでクリックして「IK平面設定ダイアログ」の「座１」か「座２」を選びます。<BR>
どちらかのボタンを押すと回転角度は初期化されます。<BR>
３D画面のマニピュレータの向きを見て回転角度を数値入力し向きを微調整します。<BR>
そして「青リング平面」「赤リング平面」「緑リング平面」のどれかを選びます。<BR>
回転軸は選択した平面に垂直なベクトルになります。<BR>
図３の例では「青リング平面」を選ぶとローカルのX軸が回転軸になり<BR>
「赤リング平面」を選ぶとローカルのY軸が回転軸になり<BR>
「緑リング平面」を選ぶとローカルのZ軸が回転軸になります。<BR>
<B>これらを設定したら忘れずに「適用」ボタンを押してください。</B><BR>
<BR>
この設定はボーンごとに行います。<BR>
マウスでボーンをクリックし、ダイアログで設定し「適用」ボタンを押すのを繰り返します。<BR>
この設定はsigファイル保存時に保存されます。<BR>
<BR>
<BR>
設定が終わったら実際に操作してみましょう。<BR>
<BR>
<IMG src="jpegfiles/rdb2_za4_4.png" width="668" height="417" border="0"><BR>
図４：操作例<BR>
<BR>
<BR>
まず座標系を選びます。「座４」ボタンを押してください。<BR>
次に「R」での回転もしくは「T2」での全体移動をします。<BR>
<BR>
図４はIKターゲット＋「T2」操作の例です。<BR>
<BR>
今回は図はありませんが「R」モードでも指定軸を反映したIKが出来ます。<BR>
<B>「R」モードのときには球やリングではなくて中央の黄色をドラッグします。</B><BR>
<B>中央の黄色ドラッグのときのみ指定軸が反映されます。</B><BR>
<BR>
「R」モードのときはモーションウインドウでIK階層数を１より大きくしても効果があり、<BR>
ねじれも少なく操作が楽になります。<BR>
<BR>
<BR>
<BR>
<A href="index.htm">トップページに戻る</A><BR>
</P>
</BODY>
</HTML>