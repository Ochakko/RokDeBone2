<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 11.0.0.0 for Windows">
<META http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE></TITLE>
</HEAD>
<BODY>
<P><FONT size="+3">バンプマップの使い方</FONT><BR>
<BR>
バンプマップとは簡単に言うとモデルデータが凸凹しているように見せるためのテクニックです。<BR>
言葉で言ってもよくわからないと思いますので、とにかくまずは実行画面を見てください。<BR>
<BR>
<IMG src="jpegfiles/rdb2_nobumpmap.jpg" width="401" height="483" border="0"><BR>
図１：バンプマップを使用していない通常のモデル<BR>
<BR>
<IMG src="jpegfiles/rdb2_bumpmap0.jpg" width="402" height="479" border="0"><BR>
図２：バンプマップを使用したモデル<BR>
<BR>
図１は通常のモデルデータで、図２がバンプマップを使用したモデルデータです。<BR>
どちらも１１２ポリゴンです。<BR>
図２を見ると分かるようにバンプマップを使用すると少ないポリゴン数でもかなり細かく凸凹しているように見せることが出来ます。<BR>
バンプマップは、実際にモデルを凸凹させているのではなくて、ライティングで陰をうまくつけることによって凸凹しているように見せます。<BR>
そのため凸凹に対して真横にカメラを移動してみると、実際は平らな平面であることがばれてしまいます。<BR>
<BR>
どうやって凸凹に見せているのかというと、凸凹情報を持ったテクスチャ（「法線マップ」と言います）を使います。<BR>
図２のモデルで使用した法線マップを図３に示します。<BR>
<BR>
<IMG src="jpegfiles/bumpmap.jpg" width="512" height="256" border="0"><BR>
図３：　法線マップ<BR>
<BR>
法線マップにはピクセル単位で面の向きがどちらを向いているかというXYZの数値が色情報として格納されています。<BR>
バンプマップとはこのピクセル単位の法線を取得してモデルデータに陰影を付け、凸凹しているように見せます。<BR>
法線マップは通常、手では描きません。高さデータをプログラムで変換して作成します。<BR>
<BR>
まず高い所を白で、低い所を黒で塗った画像を用意します（図４）<BR>
<BR>
<IMG src="jpegfiles/earthheight.jpg" width="512" height="256" border="0"><BR>
図４：　高さマップ<BR>
<BR>
黒から徐々に白になるようなところは緩やかな斜面を、急激に色が変わる部分は急斜面を意味します。<BR>
白黒の高さマップを作ったら、RokDeBone2でそれを法線マップに変換します。<BR>
RokDeBone2のメインメニューの「法線マップ」をクリックします。<BR>
すると図５のような画面が出ます。<BR>
<BR>
<IMG src="jpegfiles/rdb2_bump4.jpg" width="566" height="562" border="0"><BR>
図５：RokDeBone2の法線マップ変換機能<BR>
<BR>
ダイアログで高さマップのファイル名と、法線マップの出力ファイル名を指定します。<BR>
高さパラメータは大きい値を入れるほど、凸凹が激しくなります。<BR>
OKボタンを押せば、法線マップの出来上がりです。<BR>
<BR>
<BR>
次にRokDeBone2でsigファイルにバンプマップを設定する方法を説明します。<BR>
<BR>
モデルデータを読み込んだら、メインメニューの「面マテリアル」をクリックします。<BR>
図６のような画面になります。<BR>
<BR>
<IMG src="jpegfiles/rdb2_bump0.jpg" width="577" height="711" border="0"><BR>
図６：面マテリアル設定ダイアログ<BR>
<BR>
ダイアログの上部のリストで凸凹させたい面に設定してあるマテリアル名を選択し、<BR>
「テクスチャーの設定画面へ」ボタンを押します。<BR>
<BR>
すると図７のような画面になります。<BR>
<BR>
<IMG src="jpegfiles/rdb2_bump1.jpg" width="547" height="697" border="0"><BR>
図７：テクスチャ設定ダイアログ<BR>
<BR>
テクスチャ設定ダイアログで、通常のテクスチャ（地球の模様）とバンプマップ（法線マップ）を指定し、OKボタンを押します。<BR>
注意してほしいのは、バンプマップの指定だけでは凸凹は表示されないということです。<BR>
通常のテクスチャとバンプマップと２個とも設定して、初めて凸凹が表示されます。<BR>
<BR>
OKボタンを押すと図２のような凸凹が表示されます。<BR>
<BR>
RokDeBone2のSampleフォルダの中にバンプマップを使用した地球のモデルが入ってますので、ご覧ください。<BR>
<BR>
<BR>
<BR>
注意点としては<BR>
１、バンプマップには高さデータではなくてRokDeBone2で変換した法線マップを指定する。<BR>
２、通常テクスチャとバンプマップテクスチャと両方を指定しないと凸凹にならない。<BR>
３、シェーダー２．０（頂点シェーダー２．０とピクセルシェーダー２．０）が付いているビデオカードでしか凸凹は表示されない。<BR>
<BR>
<BR>
<A href="index.htm">トップページに戻る</A><BR>
<BR>
</P>
</BODY>
</HTML>