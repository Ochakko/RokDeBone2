<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 11.0.0.0 for Windows">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE></TITLE>
</HEAD>
<BODY>
<P><B><FONT size="+2">RokDeBone2のfile入出力</FONT></B></P>
<P>　RokDeBone２で読み込みできる形状データは、*.rokと　*.mqoと *.sig（オリジナルフォーマット）の3種類です。<BR>
書き出し出来る形状データは、*.sig、連番ＢＭＰ、連番ＭＱＯ、ＡＶＩなどです。<BR>
モーションデータは読み込みも書き出しも、*.qua(オリジナルフォーマット)のみです。<BR>
<BR>
<BR>
ver1.0.1.8からは、<B>ボーン情報のテキスト入出力（拡張子bon）</B>も出来ます。<BR>
bonファイルには、ボーンの名前と階層構造を保存することが出来ます。<BR>
ボーンファイルの仕様については、<A href="rdb2_bonefile.htm">ボーンファイルの仕様</A>をご覧ください。<BR>
<B>ボーンファイルは既に存在するジョイントに対して処理を行うものであり、<BR>
新たにジョイントを作成するものではありません。<BR>
</B>メインウインドウの”file”メニューから保存できます。<BR>
<BR>
<BR>
<IMG src="jpegfiles/button_new.gif" width="30" height="10" border="0"><BR>
頂点単位のボーンの影響度はim2ファイルで入出力可能です。<BR>
im2ファイルはバイナリ形式です。<BR>
入出力はボーンの名前を基準に行います。<BR>
影響度はsigファイルに保存されるので通常はim2は必要ありませんが、<BR>
im2を保存しておくと間違って影響度が初期化されてしまった際などのリカバリが楽になります。<BR>
<BR>
<BR>
<U>ボーンファイルは、ボーン影響マップファイルより先に、読み込んでください。</U><BR>
<BR>
ボーン影響マップファイルを読み込むと、RokDeBone2のいくつかの編集機能が使えなくなります。<BR>
sig paramsダイアログ上での、スキニングの有効、無効の指定が出来なくなります。<BR>
<BR>
<BR>
ver1.0.5.7からは、bvhファイルの入力が出来るようになりました。<BR>
bvhの読み込み方は、<A href="rdb2_LoadBVH.htm">BVHファイルの読み込み方の説明</A>をご覧ください。<BR>
<BR>
<BR>
ver4.0.2.2からはボーンの制限角度ファイル（拡張子lim）の入出力ができます。<BR>
詳しくは<A href="rdb2_limfile.htm">制限角度ファイルのフォーマット</A>をご覧ください。<BR>
<BR>
<BR>
<IMG src="jpegfiles/button_new.gif" width="30" height="10" border="0"> Xファイルの入出力も出来ます。<BR>
出力はスキンメッシュ形式で複数のモーションを１つのXファイルに出力可能です。<BR>
モーションの出力順序は読み込み順序と同じですが<BR>
DirectX付属のメッシュビューアで読み込むとモーションの順番が逆になるようなので注意してください。<BR>
<BR>
Xファイルの入力は現在は形状データ（UV含む）の入力しかサポートしていません。<BR>
<BR>
<BR>
その他、連番BMP出力も出来ます。<BR>
<IMG src="jpegfiles/bmpoutdlg.jpg" width="302" height="223" border="0"><BR>
<BR>
連番BMP出力は、メインウインドウの｢file｣メニューの｢連番BMP出力｣メニューを選択して行います。<BR>
メインウインドウと同じ大きさのBMPが、指定フレーム数分だけ出力されます。<BR>
BMP出力中は３Dウインドウは更新されません。<BR>
少し時間がかかります。<BR>
心配な方は、モーションダイアログを表示してからBMP出力をしてください。<BR>
出力中のフレーム番号が、モーションダイアログで確認できます。<BR>
<BR>
<BR>
AVI出力も、メインウインドウのfileメニューから行えます。<BR>
メインウインドウと同じ大きさの動画が、記録できます。<BR>
圧縮タイプも選ぶことが出来ます。<BR>
（環境によっては、うまくいかない圧縮タイプもあるようなので、色々試してみてください。）<BR>
<BR>
<BR>
　形状データが読み込まれていない状態では、モーションデータの読み込みは出来ません。<BR>
　<S>形状データ内のボーン構造が同じであれば、複数の形状データに、一つのモーションデータを使いまわすことが可能です。<BR>
その際、ジョイントの<B>名前ではなく、階層構造のみで判別</B>するようになっているので注意してください。</S><BR>
ver5.0.3.4からはquaファイルはボーンの名前を基準に入出力するようになりました。（オプションメニューで変更可能）<BR>
<BR>
</P>
<H3>rokファイルの読み込みオプション</H3>
<P>　*.rokには、RSuperシリーズでエクスポートしたものと、フリー版六角大王で作成したものの２種類あります。<BR>
<BR>
　RSuperシリーズでエクスポートしたものは、色情報が一部失われたり、変更されたりしてしまいます。そのため、読み込み後に、自分で設定しなおす必要があります（”Sig
Paramsダイアログ”を参照）。<BR>また、RSuperシリーズでエクスポートしたrokは、全体をXの正の方向にずらして出力されます。<BR>Xの中央にロードしたい時には、読み込み時に表示されるダイアログで、<B>「Xの平均値を中心にする」</B>を有効にしてください。<BR>
<BR>
<IMG src="jpegfiles/loadparamdlg.jpg" width="247" height="441" border="0"><BR>
<BR>　フリー版の六角大王で作成したrokは、ひとつのパーツ内に表面と裏面が混在しています。<BR>なので、読み込み時のダイアログで、<B>「表面と裏面が混ざらないようにする」</B>を有効にしてください。<BR>すると、一つのパーツ内(厳密には、ひとつながりの形状単位)で、表面か裏面かのどちらかに統一されます。<BR>
ただし、一枚板で両面表示のパーツには、うまく対応できません。<BR>
<BR>　形状データロード後に、表面と裏面の（または両面の）どちらを表示させるかは、<BR>
階層構造エディタで表示オブジェクトを右クリックしてでてくるダイアログで設定可能です。<BR>
</P>
<P><BR>
<B>mqoファイルの読み込み</B><BR>
<BR>
鏡面（接続有り、無し）、回転体、頂点カラーなどにも、対応しました。<BR>
現バージョンでは、曲面分割には対応していません。<BR>
<BR>
<IMG src="jpegfiles/button_new.gif" width="30" height="10" border="0">　moaファイルの入出力<BR>
fileメニューからmoaファイルの入出力もできます。<BR>
<A href="rdb2_MA.htm">モーションアクセラレータとは</A>をご覧ください。<BR>
moaファイルは本来はモーションの変化の仕方を設定するためのものですが<BR>
複数のモーションファイルを一括保存、一括読み込み出来るという うれしい副作用があります。<BR>
<BR>
<BR>
2009/08/01追記<BR>sigを保存すればim2, bon, lim, to1の情報もsigの中に保存されます。<BR>
moaを保存すると全てのqua(モーション)も保存されます(別ファイルで)。<BR>
ですのでデータの使い回しなどをしない場合はsigとmoaの保存を行っておけば作業内容は保存されることになります。<BR>
<BR>
<BR>
</P>
<P><A href="rokdebone.htm">RokDeBone2のトップページに戻る</A><BR>
</P>
</BODY>
</HTML>